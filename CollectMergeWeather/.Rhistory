setwd("~/ANLY 512/Final_Project")
setwd("C:/Users/postd/ANLY512_FinalProject")
weather <- read.csv("hrlyWeather01-2017_12-2019.csv")
traffic <- read.csv("Traffic_Violations2.csv")
summary(weather)
# Basic cleaning of the weather data
# Remove first two columns
weather <- subset(weather,select = -c("Location","Resolved.Address"))
weather <- weather[,!(names(weather) %in% dropCols)]
# Basic cleaning of the weather data
# Remove first two columns
dropCols <- c("Location","Resolved.Address")
weather <- weather[,!(names(weather) %in% dropCols)]
weather$Address <- as.character(weather$Address)
weather$Date.time
as.character(weather$Date.time)
as.Date(as.character(weather$Date.time), "%m/%d/%Y %h:%m")
install.packages("chron")
library(chron)
# Date to a date type value
dtparts <- t(as.data.frame(strsplit(as.character(weather$Date.time), " ")))
row.names(dtparts) <- NULL
# Convert them to date.time
thetimes <- chron(dates=dtparts[,1],times=dtparts[,2],format=c('m/d/Y','h:m'))
View(dtparts)
# Convert them to date.time
thetimes <- chron(dates=dtparts[,1],times=dtparts[,2],format=c('m/d/y','h:m'))
# Convert them to date.time
thetimes <- chron(dates=dtparts[,1],times=dtparts[,2],format=c('m/d/y','H:m'))
# Convert them to date.time
thetimes <- chron(dates=dtparts[,1],times=dtparts[,2],format=c('m/d/y','h:m:s'))
View(dtparts)
# Date to a date type value
strptime(weather$Date.time, format = "%m/%d/%Y %H:%M")
# Date to a date type value
weather$Date.time <- strptime(weather$Date.time, format = "%m/%d/%Y %H:%M")
weather[is.na(weather)]
weather[is.na(weather)] <- 0
View(weather)
# Make sure traffic date column is in same format
Traffic$Date.Of.Stop <- as.character(Traffic$Date.Of.Stop)
# Make sure traffic date column is in same format
traffic$Date.Of.Stop <- as.character(traffic$Date.Of.Stop)
traffic$Time.Of.Stop <- as.character(traffic$Time.Of.Stop)
traffic <- read.csv("Traffic_Violations2.csv",index_col=0)
# Make sure traffic date column is in same format
traffic <- traffic[,!(names(traffic) %in% "X")]
library(tidyr)
# Merge into one column and drop the old ones
unite(traffic, Date.time, c(Date.Of.Stop,Time.Of.Stop), sep = " ", remove = FALSE)
# Merge into one column and drop the old ones
traffic <- unite(traffic, Date.time, c(Date.Of.Stop,Time.Of.Stop), sep = " ", remove = TRUE)
traffic$Date.time <- strptime(traffic$Date.time, format = "%Y-%m-%d %H:%M:%s")
traffic <- read.csv("Traffic_Violations2.csv")
traffic$Date.Of.Stop <- as.character(traffic$Date.Of.Stop)
traffic$Time.Of.Stop <- as.character(traffic$Time.Of.Stop)
# Merge into one column and drop the old ones
traffic <- unite(traffic, Date.time, c(Date.Of.Stop,Time.Of.Stop), sep = " ", remove = TRUE)
traffic$Date.time <- strptime(traffic$Date.time, format = "%Y-%m-%d %H:%M:%s")
traffic <- read.csv("Traffic_Violations2.csv")
# Convert to Characters
traffic$Date.Of.Stop <- as.character(traffic$Date.Of.Stop)
traffic$Time.Of.Stop <- as.character(traffic$Time.Of.Stop)
# Merge into one column and drop the old ones
traffic <- unite(traffic, Date.time, c(Date.Of.Stop,Time.Of.Stop), sep = " ", remove = TRUE)
traffic[order(Date.time),]
traffic[order(traffic$Date.time),]
traffic[order(-traffic$Date.time),]
traffic[-order(traffic$Date.time),]
traffic[order(-traffic$Date.time),]
traffic <- read.csv("Traffic_Violations2.csv")
traffic$Date.Of.Stop <- as.numeric(traffic$Date.Of.Stop)
traffic$Time.Of.Stop <- as.numeric(traffic$Time.Of.Stop)
traffic <- read.csv("Traffic_Violations2.csv")
# Make sure traffic date column is in same format
# Convert to Characters
traffic$Date.Of.Stop <- as.character(traffic$Date.Of.Stop)
traffic$Time.Of.Stop <- as.character(traffic$Time.Of.Stop)
# Merge into one column and drop the old ones
traffic <- unite(traffic, Date.time, c(Date.Of.Stop,Time.Of.Stop), sep = " ", remove = TRUE)
trafDates <- strptime(traffic$Date.time, format = "%Y-%m-%d %H:%M:%s")
View(traffic)
traffic$Date.time[1]
View(trafDates)
trafDates <- c(rep(0,length(traffic)))
trafDates <- c(rep(0,nrow(traffic)))
for(i in 1:nrow(traffic)){
trafDates[i] <- strptime(traffic$Date.time[i], format = "%Y-%m-%d %H:%M:%s")
}
warnings()
strptime(traffic$Date.time[i], format = "%Y-%m-%d %H:%M:%s")
trafDates[i]
trafDates <- c(rep(0,nrow(traffic)))
for(i in 1:nrow(traffic)){
trafDates[[i]] <- strptime(traffic$Date.time[i], format = "%Y-%m-%d %H:%M:%s")
}
trafDates[i] <- strptime(traffic$Date.time[i], format = "%Y-%m-%d %H:%M:%s")
trafDates <- list(rep(0,nrow(traffic)))
for(i in 1:nrow(traffic)){
trafDates[i] <- strptime(traffic$Date.time[i], format = "%Y-%m-%d %H:%M:%s")
}
trafDates <- list(rep(0,nrow(traffic)))
for(i in 1:nrow(traffic)){
trafDates[[i]] <- strptime(traffic$Date.time[i], format = "%Y-%m-%d %H:%M:%s")
}
strptime(traffic$Date.time[1], format = "%Y-%m-%d %H:%M:%s")
strptime(traffic$Date.time[2], format = "%Y-%m-%d %H:%M:%s")
strptime(traffic$Date.time[1], format = "%Y-%m-%d %H:%M:%s")
strptime(traffic$Date.time[1], format = "%Y-%m-%d %H:%M:%S")
strptime(traffic$Date.time, format = "%Y-%m-%d %H:%M:%S")
traffic$Date.time <- strptime(traffic$Date.time, format = "%Y-%m-%d %H:%M:%S")
# Traffic Data
# Remove the extra index column
traffic <- traffic[,!(names(traffic) %in% "X")]
# Merge traffic and weather data by dates and times
traffic[order(traffic$Date.time),]
traffic$Date.time[1]
traffic$Date.time[1] == "2019-07-30 22:15:00 EDT"
traffic$Date.time[2]
traffic$Date.time[3]
# Merge traffic and weather data by dates and times
traffic <- traffic[order(traffic$Date.time),]
round(traffic$Date.time, units="hours")
traffic$Date.time <- round(traffic$Date.time, units="hours")
weather <- weather[order(weather$Date.time),]
# Join the weather and traffic data
merge(traffic,weather, by=intersect(names(traffic),names(weather)),sort=FALSE)
# Join the weather and traffic data
trafficWeatherMerged <- merge(traffic,weather, by=intersect(names(traffic),names(weather)),sort=FALSE)
View(traffic)
summary(trafficWeatherMerged)
View(trafficWeatherMerged)
# Drop weather address column
trafficWeatherMerged <- subset(trafficWeatherMerged,select = -Address)
View(trafficWeatherMerged)
trafficWeatherMerged[trafficWeatherMerged$Precipitation > 0,]
write.csv(trafficWeatherMerged,"MergedTrafficWeather.csv")
MWT <- read.csv("MergedWeatherTraffic.csv")
setwd("C:/Users/postd/ANLY512_FinalProject")
MWT <- read.csv("MergedWeatherTraffic.csv")
MWT <- read.csv("MergedTrafficWeather.csv")
